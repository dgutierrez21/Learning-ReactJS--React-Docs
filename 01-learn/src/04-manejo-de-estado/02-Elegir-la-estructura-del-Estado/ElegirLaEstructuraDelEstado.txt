Elección de la estructura del estado

Estructurar bien el estado puede marcar la diferencia entre un componente que es agradable de modificar y depurar, y uno que es una fuente constante de errores. Aquí hay algunos consejos que debe considerar al estructurar el estado.

Aprenderás
Cuándo usar una sola variable vs varias variables de estado
Qué evitar al organizar el estado
Cómo solucionar problemas comunes con la estructura del estado

Principios para estructurar el Estado 
Cuando escriba un componente que contenga algún estado, tendrá que tomar decisiones sobre cuántas variables de estado usar y cuál debe ser la forma de sus datos. Si bien es posible escribir programas correctos incluso con una estructura de estado subóptima, hay algunos principios que pueden guiarlo para tomar mejores decisiones:

1. Estado relacionado con el grupo. Si siempre actualiza dos o más variables de estado al mismo tiempo, considere la posibilidad de combinarlas en una sola variable de estado.

2. Evitar contradicciones en el estado. Cuando el estado está estructurado de una manera que varias partes del estado pueden contradecirse y "estar en desacuerdo" entre sí, dejas espacio para los errores. Trate de evitar esto.

3. Evite el estado redundante. Si puede calcular alguna información a partir de los accesorios del componente o de sus variables de estado existentes durante la representación, no debe poner esa información en el estado de ese componente.

4. Evite la duplicación en el estado. Cuando los mismos datos se duplican entre varias variables de estado, o dentro de objetos anidados, es difícil mantenerlos sincronizados. Reduzca la duplicación cuando pueda.

5. Evite el estado profundamente anidado. El estado profundamente jerárquico no es muy conveniente para actualizar. Cuando sea posible, prefiera estructurar el estado de una manera plana.

El objetivo detrás de estos principios es hacer que el estado sea fácil de actualizar sin introducir errores. La eliminación de datos redundantes y duplicados del estado ayuda a garantizar que todas sus piezas permanezcan sincronizadas. Esto es similar a cómo un ingeniero de base de datos podría querer "normalizar" la estructura de la base de datos para reducir la posibilidad de errores. Parafraseando a Albert Einstein, "Haz que tu estado sea lo más simple posible, pero no más simple".

Ahora veamos cómo se aplican estos principios en acción.