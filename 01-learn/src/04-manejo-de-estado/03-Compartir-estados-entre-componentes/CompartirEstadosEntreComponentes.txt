Estado compartido entre componentes
A veces, desea que el estado de dos componentes siempre cambie juntos. Para hacerlo, elimine el estado de ambos, muévalo a su padre común más cercano y luego páselo a ellos a través de accesorios. Esto se conoce como estado de elevación, y es una de las cosas más comunes que harás escribiendo código React.

Aprenderás
Cómo compartir el estado entre componentes levantándolo
Qué son los componentes controlados y no controlados

Levantar el estado con el ejemplo
En este ejemplo, un componente de Accordion padre representa dos Panelseparados:

Accordion
 Panel
 Panel

Cada componente Panel tiene un estado booleano isActive que determina si su contenido es visible.

Pulse el botón Mostrar para ambos paneles:

...

Observe cómo presionar el botón de un panel no afecta al otro panel: son independientes.

ver imagen...

Pero ahora digamos que desea cambiarlo para que solo se expanda un panel en un momento dado. Con ese diseño, expandir el segundo panel debería colapsar el primero. ¿Cómo lo harías?

Para coordinar estos dos paneles, debe "elevar su estado" a un componente padre en tres pasos:

1. Quite el estado de los componentes secundarios.
2. Pasar datos codificados de forma rígida del padre común.
3. Agregue el estado al elemento primario común y páselo junto con los controladores de eventos.

Esto permitirá que el componente Accordion coordine ambos Panely sólo se expanda uno a la vez.

Paso 1: Quitar el estado de los componentes secundarios

Dará el control de isActive del Panel a su componente padre. Esto significa que el componente padre pasará isActive a Panel como un accesorio en su lugar. Comience eliminando esta línea del componente Panel:

...

Y en su lugar, agregue isActive a la lista de accesorios del Panel:

...

Ahora el componente principal del Panel puede controlar isActive pasándolo como un accesorio. Por el contrario, el componente Panel ahora no tiene control sobre el valor de isActive, ¡ahora depende del componente principal!

Paso 2: Pasar datos codificados de forma rígida desde el padre común 
Para levantar el estado, debe ubicar el componente primario común más cercano de los dos componentes secundarios que desea coordinar:

Accordion (padre común más cercano)
    Panel
    Panel

En este ejemplo, es el componente Accordion. Dado que está por encima de ambos paneles y puede controlar sus accesorios, se convertirá en la "fuente de verdad" para la cual el panel está actualmente activo. Haga que el componente Accordion pase un valor codificado de forma rígida de isActive (por ejemplo, true) a ambos paneles:

...

Intente editar los valores isActive codificados en el componente Accordion y vea el resultado en la pantalla.

Paso 3: Agregar estado al padre común
Levantar el estado a menudo cambia la naturaleza de lo que está almacenando como estado.

En este caso, solo un panel debe estar activo a la vez. Esto significa que el componente padre común del Accordion necesita hacer un seguimiento de qué panel es el activo. En lugar de un valor boolean, podría usar un número como índice del Panel activo para la variable de estado:

Cuando activeIndex es 0, el primer panel está activo, y cuando es 1, es el segundo.

Al hacer clic en el botón "Mostrar" en cualquiera de los Panel, es necesario cambiar el índice activo en Accordion. Un Panel no puede establecer el estado activeIndex directamente porque está definido dentro del Accordion. El componente Accordion debe permitir explícitamente que el componente Panel cambie su estado pasando un controlador de eventos como accesorio:

...

El <button> dentro del Panel ahora usará el accesorio onShow como su controlador de eventos de clic:

...

¡Esto completa el estado de elevación! Mover el estado al componente padre común le permitió coordinar los dos paneles. El uso del índice activo en lugar de dos indicadores "se muestra" garantizaba que solo un panel estuviera activo en un momento dado. Y pasar el controlador de eventos al hijo permitió que el niño cambiara el estado del padre.

ver imagen...